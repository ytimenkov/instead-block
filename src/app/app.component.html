<div class="main-container">
  <header class="header header-6">
    <div class="branding">
      <a class="nav-link">
        <span class="clr-icon instead-logo"></span>
        <span class="title">Instead Blocks</span>
      </a>
    </div>
    <div class="header-actions">
      <clr-dropdown>
        <button class="nav-icon" clrDropdownTrigger>
          <clr-icon shape="cog"></clr-icon>
          <clr-icon shape="caret down"></clr-icon>
        </button>
        <clr-dropdown-menu *clrIfOpen clrPosition="bottom-right">
          <a (click)="infoEditor.visible = true" clrDropdownItem>Edit game metadata</a>
          <div class="dropdown-divider" role="separator" aria-hidden="true"></div>
          <a (click)="convertToLua()" clrDropdownItem>Show Lua code</a>
          <a (click)="convertToLua(); model.run = true" clrDropdownItem>Run</a>
          <a (click)="save()" clrDropdownItem>Save in browser</a>
          <div class="dropdown-divider" role="separator" aria-hidden="true"></div>
          <a (click)="download()" clrDropdownItem>Save to your computer</a>
          <a (click)="upload()" clrDropdownItem>Load from your computer</a>
        </clr-dropdown-menu>
      </clr-dropdown>
    </div>
  </header>
  <div class="content-container">
    <div class="content-area" style="padding: 0">
      <div class="clr-row">
        <div class="clr-col-lg-6">
          <app-blocks [model]="model"></app-blocks>
        </div>
        <div class="clr-col-lg-6">
          <clr-tabs>
            <clr-tab>
              <button clrTabLink>Game</button>
              <ng-template [(clrIfActive)]="gameActive">
                <clr-tab-content>
                  <app-instead [code]="model.generatedCode" [run]="model.run"></app-instead>
                </clr-tab-content>
              </ng-template>
            </clr-tab>
            <clr-tab>
              <button clrTabLink>Code</button>
              <ng-template [(clrIfActive)]="codeActive">
                <clr-tab-content>
                  <code id="generatedCode">{{model.generatedCode}}</code>
                </clr-tab-content>
              </ng-template>
            </clr-tab>
          </clr-tabs>
        </div>
      </div>
    </div>
  </div>
  <app-game-info #infoEditor [data]="model.workspace!.insteadMeta"></app-game-info>
</div>
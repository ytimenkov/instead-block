{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./data/playground.xml","webpack:///./src/game_info.html","webpack:///./src/blocks.ts","webpack:///./src/basic_blocks.ts","webpack:///./src/objects.ts","webpack:///./src/functions.ts","webpack:///./src/game_info.ts","webpack:///./src/files.ts","webpack:///./src/toolbox.ts","webpack:///./src/main.ts","webpack:///./data/toolbox/objects.xml","webpack:///./data/toolbox/rooms.xml","webpack:///./data/toolbox/actions.xml","webpack:///./data/toolbox/logic.xml","webpack:///./data/toolbox/menu.xml"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","2","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","defineBlock","initFunc","generateFunc","init","this","defineFieldBlock","block","appendValueInput","appendField","setCheck","setNextStatement","setPreviousStatement","generateFieldCode","valueToCode","ORDER_NONE","defineListBlock","setStyle","appendDummyInput","_block","setOutput","ORDER_ATOMIC","generateObjectCode","getFieldValue","dsc","code","INDENT","quote_","prefixLines","needNL","defBlock","getInputTargetBlock","getNextBlock","defCode","blockToCode","TypeError","addStandardFields","appendStatementInput","addReferenceFields","objectsContainer","outputType","generateReferenceCode","useLookup","pb","parentBlock_","getInsteadObjectName","objectsList","recordUndo","ws","getEventWorkspace_","BLOCK_CREATE","getBlockById","blockId","addInsteadObject","refreshReferences","id","BLOCK_CHANGE","element","idx","findInsteadObject","BLOCK_DELETE","removeInsteadObject","pop","getBlocksByType","forEach","dispose","required","findIndex","arr","field","getField","getValue","forceRerender","InsteadObject","super","fieldElement","textContent","setValue","InsteadRoom","jsonInit","statementToCode","ORDER_HIGH","setInputsInline","what","where","cond","__awaiter","thisArg","_arguments","P","generator","step","next","rejected","done","then","resetWorkspace","workspace","disable","clear","enable","convertOrRun","run","insteadMeta","version","author","workspaceToCode","codeElem","getElementById","innerText","runGame","scrollIntoView","loadWorkspace","xml","_a","_b","_c","dom","textToDom","xmlChild","childNodes","nodeName","attrs","attributes","getNamedItem","domToWorkspace","log","msg","alert","saveWorkspace","workspaceToDom","insteadNode","append","domToText","end_cat","category","style","toolbox","join","createToolBox","theme","defineTheme","base","categoryStyles","colour","blockStyles","colourPrimary","move","scrollbars","wheel","zoom","controls","registerButtonCallback","btn","getTargetWorkspace","text","localStorage","setItem","backupWorkspace","zip","gameName","file","blob","generateAsync","exportProject","inputElem","accept","display","onchange","input","files","reader","FileReader","mainFile","RegExp","async","importProject","readAsArrayBuffer","body","addFileInput","click","newData","backdropDiv","position","top","left","right","bottom","backgroundColor","zIndex","innerHTML","okButton","cancelButton","nameField","authorField","versionField","onclick","remove","showInfoDialog","editWorkspaceMetadata","addChangeListener","objectLifecycleListener","default","client","XMLHttpRequest","onreadystatechange","readyState","DONE","status","responseText","open","send"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAKlC,IAFGe,GAAqBA,EAAoBhB,GAEtCO,EAASC,QACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrBiB,EAAG,GAGAZ,EAAkB,GAQtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU8B,QAGnC,IAAIC,EAASH,EAAiB5B,GAAY,CACzCK,EAAGL,EACHgC,GAAG,EACHF,QAAS,IAUV,OANAhB,EAAQd,GAAUW,KAAKoB,EAAOD,QAASC,EAAQA,EAAOD,QAASJ,GAG/DK,EAAOC,GAAI,EAGJD,EAAOD,QAKfJ,EAAoBO,EAAI,SAAuBhC,GAC9C,IAAIiC,EAAW,GAKXC,EAAqBvB,EAAgBX,GACzC,GAA0B,IAAvBkC,EAGF,GAAGA,EACFD,EAASrB,KAAKsB,EAAmB,QAC3B,CAEN,IAAIC,EAAU,IAAIC,SAAQ,SAASC,EAASC,GAC3CJ,EAAqBvB,EAAgBX,GAAW,CAACqC,EAASC,MAE3DL,EAASrB,KAAKsB,EAAmB,GAAKC,GAGtC,IACII,EADAC,EAASC,SAASC,cAAc,UAGpCF,EAAOG,QAAU,QACjBH,EAAOI,QAAU,IACbnB,EAAoBoB,IACvBL,EAAOM,aAAa,QAASrB,EAAoBoB,IAElDL,EAAOO,IA1DV,SAAwB/C,GACvB,OAAOyB,EAAoBuB,EAAI,IAAM,CAAC,EAAI,cAAchD,IAAUA,GAAW,IAAM,CAAC,EAAI,wBAAwBA,GAAW,MAyD5GiD,CAAejD,GAG5B,IAAIkD,EAAQ,IAAIC,MAChBZ,EAAmB,SAAUa,GAE5BZ,EAAOa,QAAUb,EAAOc,OAAS,KACjCC,aAAaX,GACb,IAAIY,EAAQ7C,EAAgBX,GAC5B,GAAa,IAAVwD,EAAa,CACf,GAAGA,EAAO,CACT,IAAIC,EAAYL,IAAyB,SAAfA,EAAMM,KAAkB,UAAYN,EAAMM,MAChEC,EAAUP,GAASA,EAAMQ,QAAUR,EAAMQ,OAAOb,IACpDG,EAAMW,QAAU,iBAAmB7D,EAAU,cAAgByD,EAAY,KAAOE,EAAU,IAC1FT,EAAMY,KAAO,iBACbZ,EAAMQ,KAAOD,EACbP,EAAMa,QAAUJ,EAChBH,EAAM,GAAGN,GAEVvC,EAAgBX,QAAWgE,IAG7B,IAAIpB,EAAUqB,YAAW,WACxB1B,EAAiB,CAAEmB,KAAM,UAAWE,OAAQpB,MAC1C,MACHA,EAAOa,QAAUb,EAAOc,OAASf,EACjCE,SAASyB,KAAKC,YAAY3B,GAG5B,OAAOJ,QAAQgC,IAAInC,IAIpBR,EAAoB4C,EAAIxD,EAGxBY,EAAoB6C,EAAI3C,EAGxBF,EAAoB8C,EAAI,SAAS1C,EAASiC,EAAMU,GAC3C/C,EAAoBgD,EAAE5C,EAASiC,IAClCvD,OAAOmE,eAAe7C,EAASiC,EAAM,CAAEa,YAAY,EAAMC,IAAKJ,KAKhE/C,EAAoBoD,EAAI,SAAShD,GACX,oBAAXiD,QAA0BA,OAAOC,aAC1CxE,OAAOmE,eAAe7C,EAASiD,OAAOC,YAAa,CAAEC,MAAO,WAE7DzE,OAAOmE,eAAe7C,EAAS,aAAc,CAAEmD,OAAO,KAQvDvD,EAAoBwD,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQvD,EAAoBuD,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAK7E,OAAO8E,OAAO,MAGvB,GAFA5D,EAAoBoD,EAAEO,GACtB7E,OAAOmE,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOvD,EAAoB8C,EAAEa,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIR3D,EAAoB+D,EAAI,SAAS1D,GAChC,IAAI0C,EAAS1C,GAAUA,EAAOqD,WAC7B,WAAwB,OAAOrD,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAL,EAAoB8C,EAAEC,EAAQ,IAAKA,GAC5BA,GAIR/C,EAAoBgD,EAAI,SAASgB,EAAQC,GAAY,OAAOnF,OAAOC,UAAUC,eAAeC,KAAK+E,EAAQC,IAGzGjE,EAAoBuB,EAAI,GAGxBvB,EAAoBkE,GAAK,SAASC,GAA2B,MAApBC,QAAQ3C,MAAM0C,GAAYA,GAEnE,IAAIE,EAAaC,OAAqB,aAAIA,OAAqB,cAAK,GAChEC,EAAmBF,EAAWlF,KAAK2E,KAAKO,GAC5CA,EAAWlF,KAAOf,EAClBiG,EAAaA,EAAWG,QACxB,IAAI,IAAI7F,EAAI,EAAGA,EAAI0F,EAAWxF,OAAQF,IAAKP,EAAqBiG,EAAW1F,IAC3E,IAAIU,EAAsBkF,EAI1BhF,EAAgBJ,KAAK,CAAC,OAAO,IAEtBM,I,sCC5NT,OAAe,cAA0B,wC,mBCGzCY,EAAOD,QAFI,qZ,2FCCJ,SAASqE,EAAYpC,EAAMqC,EAAUC,GACxC,SAAetC,GAAQ,CACnBuC,KAAM,WACFF,EAASG,QAGjB,MAAYxC,GAAQsC,ECNxB,SAASG,EAAiB7C,EAAM8C,GAM5B,OALAA,EAAMC,iBAAiB,QAClBC,YAAYhD,GACZiD,SAAS,CAAC,WACfH,EAAMI,kBAAiB,GACvBJ,EAAMK,sBAAqB,GACpBL,EAEX,SAASM,EAAkBpD,EAAM8C,EAAO1C,EAAO,QAC3C,MAAO,GAAGJ,OAAU,MAAIqD,YAAYP,EAAO1C,EAAM,MAAIkD,cAEzD,SAASC,EAAgBvD,EAAM8C,GAM3B,OALAA,EAAMC,iBAAiB,SAClBC,YAAYhD,GACZiD,SAAS,CAAC,UACfH,EAAMI,kBAAiB,GACvBJ,EAAMK,sBAAqB,GACpBL,EAEXN,EAAY,eAAiBM,GAAUD,EAAiB,mBAAoBC,GACvEU,SAAS,qBAAuBV,GAAUM,EAAkB,OAAQN,IACzEN,EAAY,gBAAkBM,GAAUD,EAAiB,oBAAqBC,GACzEU,SAAS,qBAAuBV,GAAUM,EAAkB,QAASN,IAE1EN,EAAY,cAAgBM,GAAUD,EAAiB,oBAA4BC,GAC9EU,SAAS,qBAAuBV,GAAUM,EAAkB,MAAON,IACxEN,EAAY,cAAgBM,GAAUD,EAAiB,mBAA2BC,GAC7EU,SAAS,qBAAuBV,GAAUM,EAAkB,MAAON,IAExEN,EAAY,eAAiBM,GAAUD,EAAiB,yBAAiCC,GACpFU,SAAS,qBAAuBV,GAAUM,EAAkB,OAAQN,IACzEN,EAAY,cAAgBM,GAAUD,EAAiB,wBAAgCC,GAClFU,SAAS,qBAAuBV,GAAUM,EAAkB,MAAON,IACxEN,EAAY,kBAAoBM,GAAUD,EAAiB,sBAAuBC,GAC7EU,SAAS,qBAAuBV,GAAUM,EAAkB,UAAWN,IAC5EN,EAAY,iBAAmBM,GAAUD,EAAiB,sBAAuBC,GAC5EU,SAAS,qBAAuBV,GAAUM,EAAkB,SAAUN,IAC3EN,EAAY,cAAgBM,GAAUS,EAAgB,gBAAiBT,GAClEU,SAAS,gBAAkBV,GAAUM,EAAkB,MAAON,EAAO,UAC1EN,EAAY,cAAgBM,GAAUS,EAAgB,eAAgBT,GACjEU,SAAS,gBAAkBV,GAAUM,EAAkB,MAAON,EAAO,UAC1EN,EAAY,uBAAyBM,IACjCA,EAAMW,mBACDT,YAAY,qBACjBF,EAAMK,sBAAqB,GAC3BL,EAAMU,SAAS,iBACfE,GAAW,kBAEflB,EAAY,eAAiBM,IACzBA,EAAMW,mBACDT,YAAY,QACjBF,EAAMa,WAAU,EAAM,CAAC,gBAAiB,gBACxCb,EAAMU,SAAS,qBACfE,GAAW,CANkB,OAME,MAAIE,eCrDvC,SAASC,EAAmB7D,EAAM8C,GAC9B,MAAM1C,EAAO0C,EAAMgB,cAAc,QAC3BC,EAAM,MAAIV,YAAYP,EAAO,MAAO,MAAIQ,YAC9C,IAAIU,EAAOhE,EAAO,OACZ,MAAIiE,OAAS,SAAW,MAAIC,OAAO9D,GACrC2D,GAAe,OAARA,IACPC,GAAQ,MAAQ,MAAIG,YAAY,SAAWJ,EAAK,MAAIE,SAGxD,IAAIG,GAAS,EACb,IAAK,IAAIC,EAAWvB,EAAMwB,oBAAoB,cAAeD,EAAUA,EAAWA,EAASE,eAAgB,CACvG,MAAMC,EAAU,MAAIC,YAAYJ,GAAU,GAC1C,GAAuB,iBAAZG,EACP,MAAME,UAAU,yCACXL,GAAYA,EAASrE,OAE1BwE,IACAJ,GAAS,EACTJ,GAAQ,MAAQ,MAAIG,YAAYK,EAAS,MAAIP,SAOrD,OAJIG,IACAJ,GAAQ,MAEZA,GAAQ,IACDA,EAEX,SAASW,EAAkB3E,EAAM8C,GAQ7B,OAPAA,EAAMW,mBACDT,YAAYhD,GACZgD,YAAY,IAAI,iBAAehD,GAAO,QAC3C8C,EAAMC,iBAAiB,OAClBC,YAAY,mBACZC,SAAS,UACdH,EAAM8B,qBAAqB,cACpB9B,EAEX,SAAS+B,EAAmB/B,EAAOgC,EAAkBC,GAIjD,OAHAjC,EAAMW,mBACDT,YAAY,IAAI,EAAwB8B,GAAmB,QAChEhC,EAAMa,WAAU,EAAM,CAACoB,IAChBjC,EAEX,SAASkC,EAAsBlC,EAAOgC,GAClC,IAAIG,GAAY,EAChB,IAAK,IAAIC,EAAKpC,EAAMqC,aAAcD,EAAIA,EAAKA,EAAGC,aAG1B,sBAAZD,EAAGlF,OACHiF,GAAY,GAGpB,IAAIjB,EAAO,GAMX,OALIiB,IACAjB,EAAO,KAGXA,GAAQ,MAAIE,OAAOY,EAAiBM,qBAAqBtC,EAAMgB,cAAc,UACtE,CAACE,EAAM,MAAIJ,cDHtBpB,EAAY,eAAiBM,IACzBA,EAAMW,mBACDT,YAAY,UACjBF,EAAMa,WAAU,EAAM,CAAC,gBAAiB,gBACxCb,EAAMU,SAAS,qBACfE,GAAW,CANkB,OAME,MAAIE,eCAvC,MAAM,EACF,YAAY5D,GAIR4C,KAAKyC,YAAc,CAAC,CAAC,GAAI,KACzBzC,KAAK5C,KAAOA,EAEhB,QACI4C,KAAKyC,YAAYzI,OAAS,EAC1BgG,KAAKyC,YAAYnI,KAAK,CAAC,GAAI,KAE/B,wBAAwBwC,GACpB,IAAKA,EAAM4F,WAEP,OAEJ,MAAMC,EAAK7F,EAAM8F,qBACjB,GAAI9F,EAAMM,OAAS,SAAOyF,aAAc,CACpC,MAAM3C,EAAQyC,EAAGG,aAAahG,EAAMiG,SACpC,GAAI7C,EAAM9C,OAAS4C,KAAK5C,KACpB,OACJ4C,KAAKgD,iBAAiBlG,EAAMiG,QAAS7C,EAAMgB,cAAc,SACzDlB,KAAKiD,kBAAkBN,EAAIzC,EAAMgD,SAEhC,GAAIpG,EAAMM,OAAS,SAAO+F,aAAc,CACzC,GAAsB,UAAlBrG,EAAMsG,SAAsC,SAAftG,EAAMU,KACnC,OACJ,MAAM0C,EAAQyC,EAAGG,aAAahG,EAAMiG,SACpC,GAAI7C,EAAM9C,OAAS4C,KAAK5C,KACpB,OACJ,MAAMiG,EAAMrD,KAAKsD,kBAAkBxG,EAAMiG,SAAS,GAClD/C,KAAKyC,YAAYY,GAAK,GAAKnD,EAAMgB,cAAc,QAC/ClB,KAAKiD,kBAAkBN,EAAIzC,EAAMgD,SAE5BpG,EAAMM,OAAS,SAAOmG,cAG3BvD,KAAKwD,oBAAoB1G,EAAMiG,QAASJ,GAGhD,iBAAiBI,EAASvF,GACtB,MAAM6F,EAAMrD,KAAKsD,kBAAkBP,GAAS,GACxCM,GAAO,GAGFrD,KAAKyC,YAAYY,GAAK,IAAM7F,IAC7BwC,KAAKyC,YAAYY,GAAK,GAAK7F,IAIH,IAA5BwC,KAAKyC,YAAYzI,QAAiBgG,KAAKyC,YAAY,GAAG,IACtDzC,KAAKyC,YAAYgB,MAErBzD,KAAKyC,YAAYnI,KAAK,CAACkD,EAAMuF,KAEjC,oBAAoBA,EAASJ,GACzB,MAAMU,EAAMrD,KAAKsD,kBAAkBP,GAAS,GAC5C,GAAIM,EAAM,EACN,OACJrD,KAAKyC,YAAYvH,OAAOmI,EAAK,GACG,IAA5BrD,KAAKyC,YAAYzI,QACjBgG,KAAKyC,YAAYnI,KAAK,CAAC,GAAI,KAGhBqI,EAAGe,gBAAgB1D,KAAK5C,KAAO,QAAQ,GAC/CuG,QAASzD,IACIA,EAAMgB,cAAc,UACpB6B,GACZ7C,EAAM0D,SAAQ,KAI1B,kBAAkBV,EAAIW,GAClB,MAAMR,EAAMrD,KAAKyC,YAAYqB,UAAWC,GAAiBA,EAAI,KAAOb,GACpE,GAAIW,GAAYR,EAAM,EAClB,MAAMvB,UAAU,UAAY9B,KAAK5C,KAAO,YAAc8F,EAAK,cAC/D,OAAOG,EAEX,qBAAqBH,GACjB,MAAMG,EAAMrD,KAAKsD,kBAAkBJ,GAAI,GACvC,OAAOlD,KAAKyC,YAAYY,GAAK,GAEjC,kBAAkBV,EAAIO,GACHP,EAAGe,gBAAgB1D,KAAK5C,KAAO,QAAQ,GAC/CuG,QAASzD,IACZ,MAAM8D,EAAQ9D,EAAM+D,SAAS,QACzBD,EAAME,aAAehB,GACrBc,EAAMG,mBAMf,MAAMC,EAAgB,IAAI,EAAkB,kBACnD,SAAuB,eAAI,CACvBrE,KAAM,WACFgC,EAAkB,SAAU/B,MACvBY,SAAS,oBAGtB,MAAoB,eAAI,SAAUV,GAC9B,OAAOe,EAAmB,MAAOf,IAErC,MAAM,UAAgC,gBAClC,YAAYgC,GACRmC,MAAMnC,EAAiBO,aACvBzC,KAAKkC,iBAAmBA,EAI5B,QAAQoC,GACJ,MAAM5F,EAAQ4F,EAAaC,YAC3BvE,KAAKkC,iBAAiBc,iBAAiBtE,EAAO,IAC9CsB,KAAKwE,SAAS9F,IAGtB,SAA2B,mBAAI,CAC3BqB,KAAM,WACFkC,EAAmBjC,KAAMoE,EAAe,iBACnCxD,SAAS,oBAGtB,MAAwB,mBAAI,SAAUV,GAClC,OAAOkC,EAAsBlC,EAAOkE,IAEjC,MAAMK,EAAc,IAAI,EAAkB,gBACjD,SAAqB,aAAI,CACrB1E,KAAM,WACFgC,EAAkB,UAAW/B,MACxBY,SAAS,kBAGtB,MAAkB,aAAI,SAAUV,GAC5B,OAAOe,EAAmB,OAAQf,IAEtC,SAAyB,iBAAI,CACzBH,KAAM,WACFkC,EAAmBjC,KAAMyE,EAAa,eACjC7D,SAAS,kBAGtB,MAAsB,iBAAI,SAAUV,GAChC,OAAOkC,EAAsBlC,EAAOuE,IC1MxC,SAAwB,gBAAI,CACxB1E,KAAM,WACFC,KAAK0E,SAAS,CACV,SAAY,QACZ,MAAS,CACL,CACI,KAAQ,kBACR,KAAQ,eAGhB,OAAU,CAAC,YAEf1E,KAAKY,SAAS,sBAGtB,MAAqB,gBAAI,SAAUV,GAG/B,MAAO,CADI,mBADE,MAAIyE,gBAAgBzE,EAAO,cACsB,MAChD,MAAI0E,aAEtB,SAAwB,gBAAI,CACxB7E,KAAM,WACFC,KAAK0E,SAAS,CACV,SAAY,YACZ,MAAS,CACL,CACI,KAAQ,kBACR,KAAQ,eAGhB,OAAU,CAAC,YAEf1E,KAAKY,SAAS,sBAGtB,MAAqB,gBAAI,SAAUV,GAG/B,MAAO,CADI,yBADE,MAAIyE,gBAAgBzE,EAAO,cACiD,MAC3E,MAAI0E,aAEtB,SAAsB,cAAI,CACtB7E,KAAM,WACFC,KAAKa,mBACAT,YAAY,IAAI,gBAAc,CAC/B,CAAC,KAAa,KACd,CAAC,OAAsB,MACvB,CAAC,OAAsB,QACvB,OACCA,YAAY,IAAI,iBAAkB,QACvCJ,KAAKM,kBAAiB,GACtBN,KAAKO,sBAAqB,GAC1BP,KAAKY,SAAS,iBAGtB,MAAmB,cAAI,SAAUV,GAG7B,OAFYA,EAAMgB,cAAc,OAEnB,IADD,MAAII,OAAOpB,EAAMgB,cAAc,SAClB,OAE7B,SAAqB,aAAI,CACrBnB,KAAM,WACFC,KAAKG,iBAAiB,QACjBC,YAAY,iBACZC,SAAS,iBACdL,KAAKM,kBAAiB,GACtBN,KAAKO,sBAAqB,GAC1BP,KAAKY,SAAS,oBAGtB,MAAkB,aAAI,SAAUV,GAE5B,MAAO,QADM,MAAIO,YAAYP,EAAO,OAAQ,MAAIQ,YACxB,OAE5B,SAAwB,gBAAI,CACxBX,KAAM,WACFC,KAAKG,iBAAiB,QACjBC,YAAY,wBACZC,SAAS,CAAC,kBACfL,KAAKM,kBAAiB,GACtBN,KAAKO,sBAAqB,GAC1BP,KAAKY,SAAS,oBAGtB,MAAqB,gBAAI,SAAUV,GAE/B,MAAO,WADM,MAAIO,YAAYP,EAAO,OAAQ,MAAIQ,YACrB,OAE/B,SAAuB,eAAI,CACvBX,KAAM,WACFC,KAAKG,iBAAiB,QACjBC,YAAY,sBACZC,SAAS,CAAC,kBACfL,KAAKM,kBAAiB,GACtBN,KAAKO,sBAAqB,GAC1BP,KAAKY,SAAS,oBAGtB,MAAoB,eAAI,SAAUV,GAE9B,MAAO,UADM,MAAIO,YAAYP,EAAO,OAAQ,MAAIQ,YACtB,OAE9B,SAAqB,aAAI,CACrBX,KAAM,WACFC,KAAKG,iBAAiB,QACjBC,YAAY,mBACZC,SAAS,CAAC,kBACfL,KAAKG,iBAAiB,SACjBC,YAAY,KACZC,SAAS,CAAC,kBACfL,KAAKM,kBAAiB,GACtBN,KAAKO,sBAAqB,GAC1BP,KAAK6E,iBAAgB,GACrB7E,KAAKY,SAAS,oBAGtB,MAAkB,aAAI,SAAUV,GAC5B,MAAM4E,EAAO,MAAIrE,YAAYP,EAAO,OAAQ,MAAIQ,YAC1CqE,EAAQ,MAAItE,YAAYP,EAAO,QAAS,MAAIQ,YAClD,IAAIU,EAAO,QAAU0D,EAIrB,OAHIC,IACA3D,GAAQ,KAAO2D,GACnB3D,GAAQ,MACDA,GAEX,SAAsB,cAAI,CACtBrB,KAAM,WACFC,KAAKG,iBAAiB,QACjBC,YAAY,WACZC,SAAS,iBACdL,KAAKa,mBACAT,YAAY,IAAI,gBAAc,CAC/B,CAAC,IAAY,MACb,CAAC,IAAY,QACb,QACJJ,KAAKG,iBAAiB,SACjBE,SAAS,CAAC,cAAe,kBAC9BL,KAAKe,WAAU,EAAM,CAAC,YACtBf,KAAK6E,iBAAgB,GACrB7E,KAAKY,SAAS,kBAGtB,MAAmB,cAAI,SAAUV,GAC7B,MAAM8E,EAAO9E,EAAMgB,cAAc,QAGjC,MAAO,CAAC,SAFK,MAAIT,YAAYP,EAAO,OAAQ,MAAIQ,YAEtB,KAAOsE,EAAO,IAD1B,MAAIvE,YAAYP,EAAO,QAAS,MAAIQ,YACG,MAAIM,e,4BCpJzDiE,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAItJ,WAAU,SAAUC,EAASC,GAC/C,SAASjB,EAAU2D,GAAS,IAAM4G,EAAKD,EAAUE,KAAK7G,IAAW,MAAOhD,GAAKM,EAAON,IACpF,SAAS8J,EAAS9G,GAAS,IAAM4G,EAAKD,EAAiB,MAAE3G,IAAW,MAAOhD,GAAKM,EAAON,IACvF,SAAS4J,EAAKzK,GAJlB,IAAe6D,EAIa7D,EAAO4K,KAAO1J,EAAQlB,EAAO6D,QAJ1CA,EAIyD7D,EAAO6D,MAJhDA,aAAiB0G,EAAI1G,EAAQ,IAAI0G,GAAE,SAAUrJ,GAAWA,EAAQ2C,OAITgH,KAAK3K,EAAWyK,GAClGF,GAAMD,EAAYA,EAAU1K,MAAMuK,EAASC,GAAc,KAAKI,YCNtE,IAAI,EAAwC,SAAUL,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAItJ,WAAU,SAAUC,EAASC,GAC/C,SAASjB,EAAU2D,GAAS,IAAM4G,EAAKD,EAAUE,KAAK7G,IAAW,MAAOhD,GAAKM,EAAON,IACpF,SAAS8J,EAAS9G,GAAS,IAAM4G,EAAKD,EAAiB,MAAE3G,IAAW,MAAOhD,GAAKM,EAAON,IACvF,SAAS4J,EAAKzK,GAJlB,IAAe6D,EAIa7D,EAAO4K,KAAO1J,EAAQlB,EAAO6D,QAJ1CA,EAIyD7D,EAAO6D,MAJhDA,aAAiB0G,EAAI1G,EAAQ,IAAI0G,GAAE,SAAUrJ,GAAWA,EAAQ2C,OAITgH,KAAK3K,EAAWyK,GAClGF,GAAMD,EAAYA,EAAU1K,MAAMuK,EAASC,GAAc,KAAKI,YAiBtE,SAASI,EAAeC,GACpB,IAKI,SAAOC,UACPD,EAAUE,QACV1B,EAAc0B,QACdrB,EAAYqB,QAEhB,QACI,SAAOC,UAGf,SAASC,EAAaC,EAAKL,GACvB,OAAO,EAAU5F,UAAM,OAAQ,GAAQ,YACnC,MAAMkG,EAAcN,EAAUM,YAC9B,IAAI9E,EAAO,aAAa8E,EAAY1I,uBAAuB0I,EAAYC,yBAAyBD,EAAYE,YAC5GhF,GAAQ,MAAIiF,gBAAgBT,GAC5B,MAAMU,EAAWnK,SAASoK,eAAe,iBAEzC,GADAD,EAASE,UAAYpF,EACjB6E,EAAK,QACiB,wDACdQ,QAAQrF,QAGhBkF,EAASI,oBAKd,SAASC,EAAcC,EAAKhB,GAC/B,IAAIiB,EAAIC,EAAIC,EACZ,IACI,MAAMC,EAAM,MAAIC,UAAUL,GAC1BjB,EAAeC,GAEfA,EAAUM,YAAc,CAAE1I,KAAM,aAAc2I,QAAS,MAAOC,OAAQ,WACtE,IAAK,IAAWc,EAAPpN,EAAI,EAAcoN,EAAWF,EAAIG,WAAWrN,GAAKA,IACtD,GAAyB,WAArBoN,EAASE,SAAuB,CAChC,MAAMC,EAAQH,EAASI,WACjBpB,EAAc,CAChB1I,MAA6C,QAArCqJ,EAAKQ,EAAME,aAAa,eAA4B,IAAPV,OAAgB,EAASA,EAAGtC,cAAgB,GACjG4B,SAAmD,QAAxCW,EAAKO,EAAME,aAAa,kBAA+B,IAAPT,OAAgB,EAASA,EAAGvC,cAAgB,GACvG6B,QAAiD,QAAvCW,EAAKM,EAAME,aAAa,iBAA8B,IAAPR,OAAgB,EAASA,EAAGxC,cAAgB,IAEzGqB,EAAUM,YAAcA,EACxB,MAGR,MAAIsB,eAAeR,EAAKpB,GACxBrG,QAAQkI,IAAI,oBAEhB,MAAO7K,GACH,MAAM8K,EAAM,6BAA+B9K,EAC3C2C,QAAQkI,IAAIC,GACZC,MAAMD,GACN/B,EAAeC,IAGvB,SAASgC,EAAchC,GACnB,MAAMgB,EAAM,MAAIiB,eAAejC,GACzBM,EAAcN,EAAUM,YACxB4B,EAAc3L,SAASC,cAAc,WAC3C0L,EAAYtL,aAAa,OAAQ0J,EAAY1I,MAC7CsK,EAAYtL,aAAa,UAAW0J,EAAYC,SAChD2B,EAAYtL,aAAa,SAAU0J,EAAYE,QAC/CQ,EAAImB,OAAOD,GAEX,OADa,MAAIE,UAAUpB,GCtF/B,MAAMqB,EAAU,cAChB,SAASC,EAAS1K,EAAM2K,GACpB,MAAO,mBAAmB3K,qBAAwB2K,MCLtD,YAAkB,GAOlB,MAAM,EAAY,SAAe,aAAc,CAC3CC,QDDG,WACH,MAAMA,EAAU,CACZ,8BACAF,EAAS,UAAW,oBEZjB,8nCFcHD,EACAC,EAAS,UAAW,kBGfjB,8pCHiBHD,EACAC,EAAS,WAAY,oBIlBlB,iyBJoBHD,EACAC,EAAS,UAAW,kBKrBjB,0eLuBHD,EACA,cMxBG,gcN4BP,OADAG,EAAQ9N,KAAK,UACN8N,EAAQC,KAAK,IClBXC,GACTC,MDoBO,QAAMC,YAAY,UAAW,CAChCC,KAAM,UACNC,eAAgB,CACZ,eAAkB,CACdC,OAAQ,OAEZ,iBAAoB,CAChBA,OAAQ,MAEZ,iBAAoB,CAChBA,OAAQ,QAGhBC,YAAa,CACT,aAAgB,CACZC,cAAe,OAEnB,eAAkB,CACdA,cAAe,MAEnB,eAAkB,CACdA,cAAe,OAEnB,kBAAqB,CACjBA,cAAe,SC3C3BC,KAAM,CAAEC,YAAY,EAAMC,OAAO,GACjCC,KAAM,CAAEC,UAAU,KFAf,IAA+BtD,EEKtC,IFLsCA,EEEhB,GFDRuD,uBAAuB,eAAiBC,IAAUpD,GAAa,EAAOoD,EAAIC,wBACpFzD,EAAUuD,uBAAuB,MAAQC,IAAUpD,GAAa,EAAMoD,EAAIC,wBAC1EzD,EAAUuD,uBAAuB,OAASC,KA8E9C,SAAyBxD,GACrB,MAAM0D,EAAO1B,EAAchC,GAC3BrG,QAAQkI,IAAI,gBAAkB6B,GAC9B7J,OAAO8J,aAAaC,QA5CO,eA4CkBF,GAjFOG,CAAgBL,EAAIC,wBACxEzD,EAAUuD,uBAAuB,WAAaC,KAqFlD,SAAuBxD,GACZ,EAAU5F,UAAM,OAAQ,GAAQ,YACnC,MAAM0J,EAAM,IAAI,EACVC,EAAW/D,EAAUM,YAAY1I,KAEjC8L,EAAO1B,EAAchC,GAC3B8D,EAAIE,KAAQD,EAAH,oBAAuDL,GAEhE,MAAMlI,EAAO,MAAIiF,gBAAgBT,GACjC8D,EAAIE,KAAQD,EAAH,aAAmCvI,GAC5C,MAAMyI,QAAaH,EAAII,cAAc,CAAE1M,KAAM,SAC7C,iBAAOyM,EAASF,EAAH,WAhGuCI,CAAcX,EAAIC,wBAC1EzD,EAAUuD,uBAAuB,SAAWC,KA8GhD,SAAsBxD,GAClB,MACMxC,EAAUjH,SAASoK,eADT,mBAEhB,GAAInD,EACA,OAAOA,EACX,MAAM4G,EAAY7N,SAASC,cAAc,SAiBzC,OAhBA4N,EAAUC,OAAS,OACnBD,EAAU5M,KAAO,OACjB4M,EAAU7B,MAAM+B,QAAU,OAC1BF,EAAU9G,GARM,kBAShB8G,EAAUG,SAAYzO,IAClB,IAAI0O,EAAQ1O,EAAE4B,OACd,IAAK8M,EAAMC,MACP,OACJ,MAAMC,EAAS,IAAIC,WACnBD,EAAOtN,OAAS,WACZoN,EAAM1L,MAAQ,GA5B1B,SAAuBkH,EAAWwE,GACvB,EAAUpK,UAAM,OAAQ,GAAQ,YACnC,MACMwK,SADY,YAAgBJ,IACbR,KAAK,IAAIa,OAAO,sBAA6C,GAC7ED,EAKL7D,QADmB6D,EAASE,MAAM,UACd9E,GAJhB+B,MAAM,mCAwBNgD,CAAc/E,EAAW5F,KAAKnF,SAElCyP,EAAOM,kBAAkBR,EAAMC,MAAM,KAEzClO,SAAS0O,KAAKhN,YAAYmM,GACnBA,GApI+Cc,CAAa1B,EAAIC,sBAAsB0B,UAC7FnF,EAAUuD,uBAAuB,eAAiBC,KAqItD,SAA+BxD,GACpB,EAAU5F,UAAM,OAAQ,GAAQ,YACnC,MAAMkG,EAAcN,EAAUM,YACxB8E,QDlJP,SAAwBxR,GAC3B,OAAOyL,EAAUjF,UAAM,OAAQ,GAAQ,YACnC,MAAMiL,EAAc9O,SAASC,cAAc,OACrC+L,EAAQ8C,EAAY9C,MAC1BA,EAAM+C,SAAW,WACjB/C,EAAMgD,IAAM,IACZhD,EAAMiD,KAAO,IACbjD,EAAMkD,MAAQ,IACdlD,EAAMmD,OAAS,IACfnD,EAAMoD,gBAAkB,oBACxBpD,EAAMqD,OAAS,MACfrD,EAAM+B,QAAU,QAChB,IACI/N,SAAS0O,KAAKhN,YAAYoN,GAC1BA,EAAYQ,UAAY,EAAQ,QAGhC,MAAMC,EAAWvP,SAASoK,eAAe,uBACnCoF,EAAexP,SAASoK,eAAe,2BACvCqF,EAAYzP,SAASoK,eAAe,yBACpCsF,EAAc1P,SAASoK,eAAe,2BACtCuF,EAAe3P,SAASoK,eAAe,4BAM7C,OALI/M,IACAoS,EAAUlN,MAAQlF,EAAKgE,KACvBqO,EAAYnN,MAAQlF,EAAK4M,OACzB0F,EAAapN,MAAQlF,EAAK2M,eAEjB,IAAIrK,QAAQ,CAACC,EAASC,KAC/B0P,EAASK,QAAWrQ,IAChBK,EAAQ,CACJyB,KAAMoO,EAAUlN,MAChB0H,OAAQyF,EAAYnN,MACpByH,QAAS2F,EAAapN,SAG9BiN,EAAaI,QAAWrQ,IACpBK,OAIZ,QACIkP,EAAYe,aCyGMC,CAAe/F,GACjC8E,IACApF,EAAUM,YAAc8E,MA1I4BkB,CAAsB9C,EAAIC,wBEH1F,EAAU8C,kBAAmBzQ,IAAQ0I,EAAcgI,wBAAwB1Q,KAC3E,EAAUyQ,kBAAmBzQ,IAAQ+I,EAAY2H,wBAAwB1Q,KACrE+D,OAAO8J,aFmCoB,gBElC3BhK,QAAQkI,IAAI,2BACZd,EAAclH,OAAO8J,aFiCM,gBEjCyB,OAEnD,CACDhK,QAAQkI,IAAI,6BACZ,MAAMmC,EAAO,EAAQ,QAAuByC,QACtCC,EAAS,IAAIC,eACnBD,EAAOE,mBAAqB,WACpBxM,KAAKyM,aAAezM,KAAK0M,MAAwB,MAAhB1M,KAAK2M,QACtChG,EAAc3G,KAAK4M,aAAc,IAGzCN,EAAOO,KAAK,MAAOjD,GAAM,GACzB0C,EAAOQ","file":"main.e431d657a51ff471819a.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t2: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({\"1\":\"instead-js\"}[chunkId]||chunkId) + \".\" + {\"1\":\"8e11af2e6fedd5320fc7\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"zUnb\",0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export default __webpack_public_path__ + \"da7740faec2065d0c0e2432480abd6a2.xml\";","// Module\nvar code = \"<div id=\\\"game_info_dialog\\\"> <header>Game metadata</header> <table> <tr> <td>Game name</td> <td><input id=\\\"game_info_dialog_name\\\"></td> </tr> <tr> <td>Autor</td> <td><input id=\\\"game_info_dialog_author\\\"></td> </tr> <tr> <td>Version</td> <td><input id=\\\"game_info_dialog_version\\\"></td> </tr> </table> <button id=\\\"game_info_dialog_ok\\\">OK</button> <button id=\\\"game_info_dialog_cancel\\\">Cancel</button> </div>\";\n// Exports\nmodule.exports = code;","import * as Blockly from \"blockly/core\";\nimport \"blockly/lua\";\nexport function defineBlock(name, initFunc, generateFunc) {\n    Blockly.Blocks[name] = {\n        init: function () {\n            initFunc(this);\n        }\n    };\n    Blockly.Lua[name] = generateFunc;\n}\n","import { defineBlock } from \"./blocks\";\nimport { Lua } from \"blockly/core\";\nfunction defineFieldBlock(type, block) {\n    block.appendValueInput(\"TEXT\")\n        .appendField(type)\n        .setCheck([\"String\"]);\n    block.setNextStatement(true);\n    block.setPreviousStatement(true);\n    return block;\n}\nfunction generateFieldCode(type, block, name = \"TEXT\") {\n    return `${type} = ${Lua.valueToCode(block, name, Lua.ORDER_NONE)}`;\n}\nfunction defineListBlock(type, block) {\n    block.appendValueInput(\"ITEMS\")\n        .appendField(type)\n        .setCheck([\"Array\"]);\n    block.setNextStatement(true);\n    block.setPreviousStatement(true);\n    return block;\n}\ndefineBlock(\"instead_disp\", (block) => defineFieldBlock(\"Альт. имя (disp)\", block)\n    .setStyle(\"properties_blocks\"), (block) => generateFieldCode(\"disp\", block));\ndefineBlock(\"instead_decor\", (block) => defineFieldBlock(\"Декорации (decor)\", block)\n    .setStyle(\"properties_blocks\"), (block) => generateFieldCode(\"decor\", block));\n// TODO: Fine-tune inv that it can be added only to objects, and not to a room.\ndefineBlock(\"instead_inv\", (block) => defineFieldBlock(\"Инвентарь(inv) \\u{1F392}\", block)\n    .setStyle(\"properties_blocks\"), (block) => generateFieldCode(\"inv\", block));\ndefineBlock(\"instead_act\", (block) => defineFieldBlock(\"Действие(act) \\u{1F50D}\", block)\n    .setStyle(\"properties_blocks\"), (block) => generateFieldCode(\"act\", block));\n// TODO: Need to restrict that this function takes 2 arguments.\ndefineBlock(\"instead_used\", (block) => defineFieldBlock(\"Использование(used) \\u{1F517}\", block)\n    .setStyle(\"properties_blocks\"), (block) => generateFieldCode(\"used\", block));\ndefineBlock(\"instead_use\", (block) => defineFieldBlock(\"Использование(use) \\u{1F528}\", block)\n    .setStyle(\"properties_blocks\"), (block) => generateFieldCode(\"use\", block));\ndefineBlock(\"instead_onenter\", (block) => defineFieldBlock(\"При входе (onenter)\", block)\n    .setStyle(\"properties_blocks\"), (block) => generateFieldCode(\"onenter\", block));\ndefineBlock(\"instead_onexit\", (block) => defineFieldBlock(\"При выходе (onexit)\", block)\n    .setStyle(\"properties_blocks\"), (block) => generateFieldCode(\"onexit\", block));\ndefineBlock(\"instead_obj\", (block) => defineListBlock(\"Объекты (obj)\", block)\n    .setStyle(\"rooms_blocks\"), (block) => generateFieldCode(\"obj\", block, \"ITEMS\"));\ndefineBlock(\"instead_way\", (block) => defineListBlock(\"Выходы (way)\", block)\n    .setStyle(\"rooms_blocks\"), (block) => generateFieldCode(\"way\", block, \"ITEMS\"));\ndefineBlock(\"instead_return_false\", (block) => {\n    block.appendDummyInput()\n        .appendField(\"отменить действие\");\n    block.setPreviousStatement(true);\n    block.setStyle(\"logic_blocks\");\n}, (_block) => \"return false\\n\");\nexport const selfParameterName = \"self\";\ndefineBlock(\"instead_self\", (block) => {\n    block.appendDummyInput()\n        .appendField(\"себя\");\n    block.setOutput(true, [\"InsteadObject\", \"InsteadRoom\"]);\n    block.setStyle(\"procedure_blocks\");\n}, (_block) => [selfParameterName, Lua.ORDER_ATOMIC]);\nexport const whatParameterName = \"what\";\ndefineBlock(\"instead_what\", (block) => {\n    block.appendDummyInput()\n        .appendField(\"объект\");\n    block.setOutput(true, [\"InsteadObject\", \"InsteadRoom\"]);\n    block.setStyle(\"procedure_blocks\");\n}, (_block) => [whatParameterName, Lua.ORDER_ATOMIC]);\n","import \"./blocks\";\nimport { Lua, Blocks, FieldTextInput, FieldDropdown, Events } from \"blockly/core\";\nfunction generateObjectCode(type, block) {\n    const name = block.getFieldValue(\"NAME\");\n    const dsc = Lua.valueToCode(block, \"DSC\", Lua.ORDER_NONE);\n    let code = type + \" {\\n\"\n        + Lua.INDENT + \"nam = \" + Lua.quote_(name);\n    if (dsc && dsc !== \"''\") {\n        code += \",\\n\" + Lua.prefixLines(\"dsc = \" + dsc, Lua.INDENT);\n    }\n    // Blocks in definition need to be comma-separated.\n    let needNL = false;\n    for (let defBlock = block.getInputTargetBlock(\"DEFINITION\"); defBlock; defBlock = defBlock.getNextBlock()) {\n        const defCode = Lua.blockToCode(defBlock, true);\n        if (typeof defCode !== \"string\") {\n            throw TypeError(\"Expecting code from statement block: \" +\n                (defBlock && defBlock.type));\n        }\n        if (defCode) {\n            needNL = true;\n            code += \",\\n\" + Lua.prefixLines(defCode, Lua.INDENT);\n        }\n    }\n    if (needNL) {\n        code += \"\\n\";\n    }\n    code += \"}\";\n    return code;\n}\nfunction addStandardFields(type, block) {\n    block.appendDummyInput()\n        .appendField(type)\n        .appendField(new FieldTextInput(type), \"NAME\");\n    block.appendValueInput(\"DSC\")\n        .appendField(\"Описание(dsc): \")\n        .setCheck(\"String\");\n    block.appendStatementInput(\"DEFINITION\");\n    return block;\n}\nfunction addReferenceFields(block, objectsContainer, outputType) {\n    block.appendDummyInput()\n        .appendField(new ObjectReferenceDropDown(objectsContainer), \"NAME\");\n    block.setOutput(true, [outputType]);\n    return block;\n}\nfunction generateReferenceCode(block, objectsContainer) {\n    let useLookup = true;\n    for (let pb = block.parentBlock_; pb; pb = pb.parentBlock_) {\n        // If object is inside list render it as a string so it will be resolved\n        // by the engine.\n        if (pb.type === \"lists_create_with\") {\n            useLookup = false;\n        }\n    }\n    let code = \"\";\n    if (useLookup) {\n        code = \"_\";\n    }\n    ;\n    code += Lua.quote_(objectsContainer.getInsteadObjectName(block.getFieldValue(\"NAME\")));\n    return [code, Lua.ORDER_ATOMIC];\n}\nclass InsteadObjectBase {\n    constructor(type) {\n        // There should be an empty element if no objects created\n        // to prevent Blockly complaining that dropdown field should\n        // have at least one option.\n        this.objectsList = [[\"\", \"\"]];\n        this.type = type;\n    }\n    clear() {\n        this.objectsList.length = 0;\n        this.objectsList.push([\"\", \"\"]);\n    }\n    objectLifecycleListener(event) {\n        if (!event.recordUndo) {\n            // Events not generated by user. Skip handling.\n            return;\n        }\n        const ws = event.getEventWorkspace_();\n        if (event.type === Events.BLOCK_CREATE) {\n            const block = ws.getBlockById(event.blockId);\n            if (block.type !== this.type)\n                return;\n            this.addInsteadObject(event.blockId, block.getFieldValue(\"NAME\"));\n            this.refreshReferences(ws, block.id);\n        }\n        else if (event.type === Events.BLOCK_CHANGE) {\n            if (event.element !== \"field\" || event.name !== \"NAME\")\n                return;\n            const block = ws.getBlockById(event.blockId);\n            if (block.type !== this.type)\n                return;\n            const idx = this.findInsteadObject(event.blockId, true);\n            this.objectsList[idx][0] = block.getFieldValue(\"NAME\");\n            this.refreshReferences(ws, block.id);\n        }\n        else if (event.type === Events.BLOCK_DELETE) {\n            // There is no way to determine which type of block\n            // was removed, so rely only on block id being in the list.\n            this.removeInsteadObject(event.blockId, ws);\n        }\n    }\n    addInsteadObject(blockId, name) {\n        const idx = this.findInsteadObject(blockId, false);\n        if (idx >= 0) {\n            // If object was added during deserialization, name is empty.\n            // Fix it after workspace is loaded\n            if (!this.objectsList[idx][0] && name) {\n                this.objectsList[idx][0] = name;\n            }\n            return;\n        }\n        if (this.objectsList.length === 1 && !this.objectsList[0][1]) {\n            this.objectsList.pop();\n        }\n        this.objectsList.push([name, blockId]);\n    }\n    removeInsteadObject(blockId, ws) {\n        const idx = this.findInsteadObject(blockId, false);\n        if (idx < 0)\n            return;\n        this.objectsList.splice(idx, 1);\n        if (this.objectsList.length === 0) {\n            this.objectsList.push([\"\", \"\"]);\n        }\n        // Remove dangling references\n        const blocks = ws.getBlocksByType(this.type + \"_ref\", false);\n        blocks.forEach((block) => {\n            const refName = block.getFieldValue(\"NAME\");\n            if (refName === blockId) {\n                block.dispose(true);\n            }\n        });\n    }\n    findInsteadObject(id, required) {\n        const idx = this.objectsList.findIndex((arr) => { return arr[1] === id; });\n        if (required && idx < 0)\n            throw TypeError(\"Object \" + this.type + \" with id \" + id + \" not found\");\n        return idx;\n    }\n    getInsteadObjectName(id) {\n        const idx = this.findInsteadObject(id, true);\n        return this.objectsList[idx][0];\n    }\n    refreshReferences(ws, id) {\n        const blocks = ws.getBlocksByType(this.type + \"_ref\", false);\n        blocks.forEach((block) => {\n            const field = block.getField(\"NAME\");\n            if (field.getValue() === id) {\n                field.forceRerender();\n            }\n        });\n    }\n}\n;\nexport const InsteadObject = new InsteadObjectBase(\"instead_object\");\nBlocks[\"instead_object\"] = {\n    init: function () {\n        addStandardFields(\"Объект\", this)\n            .setStyle(\"objects_blocks\");\n    }\n};\nLua[\"instead_object\"] = function (block) {\n    return generateObjectCode(\"obj\", block);\n};\nclass ObjectReferenceDropDown extends FieldDropdown {\n    constructor(objectsContainer) {\n        super(objectsContainer.objectsList);\n        this.objectsContainer = objectsContainer;\n    }\n    // Override deserialization to temporarily add value into the\n    // list so validation passes. Real object should come soon.\n    fromXml(fieldElement) {\n        const value = fieldElement.textContent;\n        this.objectsContainer.addInsteadObject(value, \"\");\n        this.setValue(value);\n    }\n}\nBlocks[\"instead_object_ref\"] = {\n    init: function () {\n        addReferenceFields(this, InsteadObject, \"InsteadObject\")\n            .setStyle(\"objects_blocks\");\n    },\n};\nLua[\"instead_object_ref\"] = function (block) {\n    return generateReferenceCode(block, InsteadObject);\n};\nexport const InsteadRoom = new InsteadObjectBase(\"instead_room\");\nBlocks[\"instead_room\"] = {\n    init: function () {\n        addStandardFields(\"Комната\", this)\n            .setStyle(\"rooms_blocks\");\n    }\n};\nLua[\"instead_room\"] = function (block) {\n    return generateObjectCode(\"room\", block);\n};\nBlocks[\"instead_room_ref\"] = {\n    init: function () {\n        addReferenceFields(this, InsteadRoom, \"InsteadRoom\")\n            .setStyle(\"rooms_blocks\");\n    },\n};\nLua[\"instead_room_ref\"] = function (block) {\n    return generateReferenceCode(block, InsteadRoom);\n};\n// TODO: Maybe have a separate object \"Main room\" where nam overridden into \"main\" and disp used instead.\n// Or maybe just provide it as a \"default\" workspace, since disp is useful for dynamic title.\n","import \"./blocks\";\nimport { selfParameterName, whatParameterName } from \"./basic_blocks\";\nimport { Lua, Blocks, FieldDropdown, FieldTextInput, } from \"blockly/core\";\nBlocks[\"instead_method0\"] = {\n    init: function () {\n        this.jsonInit({\n            \"message0\": \"\\u{1D453} %1\",\n            \"args0\": [\n                {\n                    \"type\": \"input_statement\",\n                    \"name\": \"DEFINITION\"\n                }\n            ],\n            \"output\": [\"String\"],\n        });\n        this.setStyle(\"procedure_blocks\");\n    }\n};\nLua[\"instead_method0\"] = function (block) {\n    let branch = Lua.statementToCode(block, \"DEFINITION\");\n    let code = \"function(\" + selfParameterName + \")\\n\" + branch + \"end\";\n    return [code, Lua.ORDER_HIGH];\n};\nBlocks[\"instead_method1\"] = {\n    init: function () {\n        this.jsonInit({\n            \"message0\": \"\\u{1D453} (w) %1\",\n            \"args0\": [\n                {\n                    \"type\": \"input_statement\",\n                    \"name\": \"DEFINITION\"\n                }\n            ],\n            \"output\": [\"String\"],\n        });\n        this.setStyle(\"procedure_blocks\");\n    }\n};\nLua[\"instead_method1\"] = function (block) {\n    let branch = Lua.statementToCode(block, \"DEFINITION\");\n    let code = \"function(\" + selfParameterName + \", \" + whatParameterName + \")\\n\" + branch + \"end\";\n    return [code, Lua.ORDER_HIGH];\n};\nBlocks[\"instead_print\"] = {\n    init: function () {\n        this.appendDummyInput()\n            .appendField(new FieldDropdown([\n            [\"\\u{1D45D}\", \"p\"],\n            [\"\\u{1D45D}\\u{1D45F}\", \"pr\"],\n            [\"\\u{1D45D}\\u{1D45B}\", \"pn\"],\n        ]), \"FUN\")\n            .appendField(new FieldTextInput(), \"TEXT\");\n        this.setNextStatement(true);\n        this.setPreviousStatement(true);\n        this.setStyle(\"text_blocks\");\n    }\n};\nLua[\"instead_print\"] = function (block) {\n    const fun = block.getFieldValue(\"FUN\");\n    const msg = Lua.quote_(block.getFieldValue(\"TEXT\"));\n    return fun + \"(\" + msg + \")\\n\";\n};\nBlocks[\"instead_take\"] = {\n    init: function () {\n        this.appendValueInput(\"WHAT\")\n            .appendField(\"взять(take): \")\n            .setCheck(\"InsteadObject\");\n        this.setNextStatement(true);\n        this.setPreviousStatement(true);\n        this.setStyle(\"actions_blocks\");\n    }\n};\nLua[\"instead_take\"] = function (block) {\n    const what = Lua.valueToCode(block, \"WHAT\", Lua.ORDER_NONE);\n    return \"take(\" + what + \")\\n\";\n};\nBlocks[\"instead_disable\"] = {\n    init: function () {\n        this.appendValueInput(\"WHAT\")\n            .appendField(\"выключить(disable): \")\n            .setCheck([\"InsteadObject\"]);\n        this.setNextStatement(true);\n        this.setPreviousStatement(true);\n        this.setStyle(\"actions_blocks\");\n    }\n};\nLua[\"instead_disable\"] = function (block) {\n    const what = Lua.valueToCode(block, \"WHAT\", Lua.ORDER_NONE);\n    return \"disable(\" + what + \")\\n\";\n};\nBlocks[\"instead_enable\"] = {\n    init: function () {\n        this.appendValueInput(\"WHAT\")\n            .appendField(\"включить(enable): \")\n            .setCheck([\"InsteadObject\"]);\n        this.setNextStatement(true);\n        this.setPreviousStatement(true);\n        this.setStyle(\"actions_blocks\");\n    }\n};\nLua[\"instead_enable\"] = function (block) {\n    const what = Lua.valueToCode(block, \"WHAT\", Lua.ORDER_NONE);\n    return \"enable(\" + what + \")\\n\";\n};\nBlocks[\"instead_drop\"] = {\n    init: function () {\n        this.appendValueInput(\"WHAT\")\n            .appendField(\"бросить(drop): \")\n            .setCheck([\"InsteadObject\"]);\n        this.appendValueInput(\"WHERE\")\n            .appendField(\"в\")\n            .setCheck([\"InsteadObject\"]);\n        this.setNextStatement(true);\n        this.setPreviousStatement(true);\n        this.setInputsInline(true);\n        this.setStyle(\"actions_blocks\");\n    }\n};\nLua[\"instead_drop\"] = function (block) {\n    const what = Lua.valueToCode(block, \"WHAT\", Lua.ORDER_NONE);\n    const where = Lua.valueToCode(block, \"WHERE\", Lua.ORDER_NONE);\n    let code = \"drop(\" + what;\n    if (where)\n        code += \", \" + where;\n    code += \")\\n\";\n    return code;\n};\nBlocks[\"instead_where\"] = {\n    init: function () {\n        this.appendValueInput(\"WHAT\")\n            .appendField(\"(where)\")\n            .setCheck(\"InsteadObject\");\n        this.appendDummyInput()\n            .appendField(new FieldDropdown([\n            [\"\\u{2208}\", \"==\"],\n            [\"\\u{2209}\", \"~=\"]\n        ]), \"COND\");\n        this.appendValueInput(\"WHERE\")\n            .setCheck([\"InsteadRoom\", \"InsteadObject\"]);\n        this.setOutput(true, [\"Boolean\"]);\n        this.setInputsInline(true);\n        this.setStyle(\"logic_blocks\");\n    }\n};\nLua[\"instead_where\"] = function (block) {\n    const cond = block.getFieldValue(\"COND\");\n    const what = Lua.valueToCode(block, \"WHAT\", Lua.ORDER_NONE);\n    const where = Lua.valueToCode(block, \"WHERE\", Lua.ORDER_NONE);\n    return [\"where(\" + what + \") \" + cond + \" \" + where, Lua.ORDER_ATOMIC];\n};\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n;\nexport function showInfoDialog(data) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const backdropDiv = document.createElement('div');\n        const style = backdropDiv.style;\n        style.position = \"absolute\";\n        style.top = \"0\";\n        style.left = \"0\";\n        style.right = \"0\";\n        style.bottom = \"0\";\n        style.backgroundColor = \"rgba(0, 0, 0, .7)\";\n        style.zIndex = \"100\";\n        style.display = \"block\";\n        try {\n            document.body.appendChild(backdropDiv);\n            backdropDiv.innerHTML = require(\"./game_info.html\");\n            // const dialog = document.getElementById(\"game_info_dialog\") as HTMLElement;\n            // dialog.onclick = (e) => { e.stopPropagation(); };\n            const okButton = document.getElementById(\"game_info_dialog_ok\");\n            const cancelButton = document.getElementById(\"game_info_dialog_cancel\");\n            const nameField = document.getElementById(\"game_info_dialog_name\");\n            const authorField = document.getElementById(\"game_info_dialog_author\");\n            const versionField = document.getElementById(\"game_info_dialog_version\");\n            if (data) {\n                nameField.value = data.name;\n                authorField.value = data.author;\n                versionField.value = data.version;\n            }\n            return yield new Promise((resolve, reject) => {\n                okButton.onclick = (e) => {\n                    resolve({\n                        name: nameField.value,\n                        author: authorField.value,\n                        version: versionField.value,\n                    });\n                };\n                cancelButton.onclick = (e) => {\n                    resolve();\n                };\n            });\n        }\n        finally {\n            backdropDiv.remove();\n        }\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Xml, Lua, Events } from \"blockly/core\";\nimport * as JSZip from \"jszip\";\nimport { saveAs } from \"file-saver\";\nimport { InsteadObject, InsteadRoom } from \"./objects\";\nimport { showInfoDialog } from \"./game_info\";\nexport function registerFileCallbacks(workspace) {\n    workspace.registerButtonCallback(\"convertToLua\", (btn) => { convertOrRun(false, btn.getTargetWorkspace()); });\n    workspace.registerButtonCallback(\"run\", (btn) => { convertOrRun(true, btn.getTargetWorkspace()); });\n    workspace.registerButtonCallback(\"save\", (btn) => { backupWorkspace(btn.getTargetWorkspace()); });\n    workspace.registerButtonCallback(\"download\", (btn) => { exportProject(btn.getTargetWorkspace()); });\n    workspace.registerButtonCallback(\"upload\", (btn) => { addFileInput(btn.getTargetWorkspace()).click(); });\n    workspace.registerButtonCallback(\"editMetadata\", (btn) => { editWorkspaceMetadata(btn.getTargetWorkspace()); });\n    // workspace.registerToolboxCategoryCallback(\"INSTEAD_GAMES\", inteadGamesFlyout);\n}\nfunction resetWorkspace(workspace) {\n    try {\n        // Disable events because when reloading workspace\n        // all events will be batched up objects removed\n        // during clear() call.\n        // This this cause removal of references for newly created objects.\n        Events.disable();\n        workspace.clear();\n        InsteadObject.clear();\n        InsteadRoom.clear();\n    }\n    finally {\n        Events.enable();\n    }\n}\nfunction convertOrRun(run, workspace) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const insteadMeta = workspace.insteadMeta;\n        let code = `-- $Name: ${insteadMeta.name}$\\n-- $Version: ${insteadMeta.version}$\\n-- $Author: ${insteadMeta.author}$\\n`;\n        code += Lua.workspaceToCode(workspace);\n        const codeElem = document.getElementById(\"generatedCode\");\n        codeElem.innerText = code;\n        if (run) {\n            const instead = yield import(\"./instead\");\n            instead.runGame(code);\n        }\n        else {\n            codeElem.scrollIntoView();\n        }\n    });\n}\nexport const localStorageKey = \"instead-data\";\nexport function loadWorkspace(xml, workspace) {\n    var _a, _b, _c;\n    try {\n        const dom = Xml.textToDom(xml);\n        resetWorkspace(workspace);\n        // Default\n        workspace.insteadMeta = { name: \"Playground\", version: \"0.0\", author: \"Unknown\" };\n        for (let i = 0, xmlChild; (xmlChild = dom.childNodes[i]); i++) {\n            if (xmlChild.nodeName == \"instead\") {\n                const attrs = xmlChild.attributes;\n                const insteadMeta = {\n                    name: ((_a = attrs.getNamedItem(\"name\")) === null || _a === void 0 ? void 0 : _a.textContent) || \"\",\n                    version: ((_b = attrs.getNamedItem(\"version\")) === null || _b === void 0 ? void 0 : _b.textContent) || \"\",\n                    author: ((_c = attrs.getNamedItem(\"author\")) === null || _c === void 0 ? void 0 : _c.textContent) || \"\",\n                };\n                workspace.insteadMeta = insteadMeta;\n                break;\n            }\n        }\n        Xml.domToWorkspace(dom, workspace);\n        console.log(\"Loaded workspace\");\n    }\n    catch (error) {\n        const msg = \"Failed to load workspace: \" + error;\n        console.log(msg);\n        alert(msg);\n        resetWorkspace(workspace);\n    }\n}\nfunction saveWorkspace(workspace) {\n    const xml = Xml.workspaceToDom(workspace);\n    const insteadMeta = workspace.insteadMeta;\n    const insteadNode = document.createElement(\"instead\");\n    insteadNode.setAttribute(\"name\", insteadMeta.name);\n    insteadNode.setAttribute(\"version\", insteadMeta.version);\n    insteadNode.setAttribute(\"author\", insteadMeta.author);\n    xml.append(insteadNode);\n    const text = Xml.domToText(xml);\n    return text;\n}\nfunction backupWorkspace(workspace) {\n    const text = saveWorkspace(workspace);\n    console.log(\"Saving text: \" + text);\n    window.localStorage.setItem(localStorageKey, text);\n}\n// Default file name for now...\nconst mainFileName = \"main3\";\nconst blocksFolderName = \"blocks\";\nfunction exportProject(workspace) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const zip = new JSZip();\n        const gameName = workspace.insteadMeta.name;\n        // Add blocks.\n        const text = saveWorkspace(workspace);\n        zip.file(`${gameName}/${blocksFolderName}/${mainFileName}.xml`, text);\n        // Add files to load by Instead\n        const code = Lua.workspaceToCode(workspace);\n        zip.file(`${gameName}/${mainFileName}.lua`, code);\n        const blob = yield zip.generateAsync({ type: \"blob\" });\n        saveAs(blob, `${gameName}.zip`);\n    });\n}\nfunction importProject(workspace, input) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const zip = yield JSZip.loadAsync(input);\n        const mainFile = zip.file(new RegExp(`${blocksFolderName}/${mainFileName}.xml$`))[0];\n        if (!mainFile) {\n            alert(\"Can't find blocks definition\");\n            return;\n        }\n        const text = yield mainFile.async(\"string\");\n        loadWorkspace(text, workspace);\n    });\n}\nfunction addFileInput(workspace) {\n    const inputId = \"FileUploadInput\";\n    const element = document.getElementById(inputId);\n    if (element)\n        return element;\n    const inputElem = document.createElement(\"input\");\n    inputElem.accept = \".zip\";\n    inputElem.type = \"file\";\n    inputElem.style.display = \"none\";\n    inputElem.id = inputId;\n    inputElem.onchange = (e) => {\n        let input = e.target;\n        if (!input.files)\n            return;\n        const reader = new FileReader();\n        reader.onload = function () {\n            input.value = \"\";\n            importProject(workspace, this.result);\n        };\n        reader.readAsArrayBuffer(input.files[0]);\n    };\n    document.body.appendChild(inputElem);\n    return inputElem;\n}\nfunction editWorkspaceMetadata(workspace) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const insteadMeta = workspace.insteadMeta;\n        const newData = yield showInfoDialog(insteadMeta);\n        if (newData) {\n            workspace.insteadMeta = newData;\n        }\n    });\n}\n","import { Theme } from \"blockly/core\";\nimport * as rooms_blocks from \"data/toolbox/rooms.xml\";\nimport * as objects_blocks from \"data/toolbox/objects.xml\";\nimport * as actions_blocks from \"data/toolbox/actions.xml\";\nimport * as logic_blocks from \"data/toolbox/logic.xml\";\nimport * as menu_catgegory from \"data/toolbox/menu.xml\";\nconst end_cat = \"</category>\";\nfunction category(name, style) {\n    return `<category name=\"${name}\" categorystyle=\"${style}\">`;\n}\nexport function createToolBox() {\n    const toolbox = [\n        \"<xml style=\\\"display: none\\\">\",\n        category(\"Объекты\", \"objects_category\"),\n        objects_blocks.default,\n        end_cat,\n        category(\"Комнаты\", \"rooms_category\"),\n        rooms_blocks.default,\n        end_cat,\n        category(\"Действия\", \"actions_category\"),\n        actions_blocks.default,\n        end_cat,\n        category(\"Условия\", \"logic_category\"),\n        logic_blocks.default,\n        end_cat,\n        \"<sep></sep>\",\n        menu_catgegory.default,\n    ];\n    toolbox.push(\"</xml>\");\n    return toolbox.join(\"\");\n}\nexport function createInsteadTheme() {\n    return Theme.defineTheme(\"instead\", {\n        base: \"classic\",\n        categoryStyles: {\n            \"rooms_category\": {\n                colour: \"120\"\n            },\n            \"objects_category\": {\n                colour: \"60\"\n            },\n            \"actions_category\": {\n                colour: \"120\"\n            }\n        },\n        blockStyles: {\n            \"rooms_blocks\": {\n                colourPrimary: \"120\"\n            },\n            \"objects_blocks\": {\n                colourPrimary: \"60\"\n            },\n            \"actions_blocks\": {\n                colourPrimary: \"120\"\n            },\n            \"properties_blocks\": {\n                colourPrimary: \"30\"\n            }\n        }\n    });\n}\n","import * as Blockly from \"blockly/core\";\nimport \"blockly/blocks\";\nimport * as Ru from 'blockly/msg/ru';\nBlockly.setLocale(Ru);\nimport \"./basic_blocks\";\nimport \"./objects\";\nimport \"./functions\";\nimport { InsteadObject, InsteadRoom } from \"./objects\";\nimport { registerFileCallbacks, loadWorkspace, localStorageKey } from \"./files\";\nimport { createToolBox, createInsteadTheme } from \"./toolbox\";\nconst workspace = Blockly.inject(\"blocklyDiv\", {\n    toolbox: createToolBox(),\n    theme: createInsteadTheme(),\n    move: { scrollbars: true, wheel: true },\n    zoom: { controls: true, },\n});\nregisterFileCallbacks(workspace);\nworkspace.addChangeListener((e) => { InsteadObject.objectLifecycleListener(e); });\nworkspace.addChangeListener((e) => { InsteadRoom.objectLifecycleListener(e); });\nif (window.localStorage[localStorageKey]) {\n    console.log(\"Loading saved workspace\");\n    loadWorkspace(window.localStorage[localStorageKey], workspace);\n}\nelse {\n    console.log(\"Loading default workspace\");\n    const file = require(\"data/playground.xml\").default;\n    const client = new XMLHttpRequest();\n    client.onreadystatechange = function () {\n        if (this.readyState === this.DONE && this.status === 200) {\n            loadWorkspace(this.responseText, workspace);\n        }\n    };\n    client.open(\"GET\", file, true);\n    client.send();\n}\n","// Module\nvar code = \"<block type=\\\"instead_object\\\"> <value name=\\\"DSC\\\"> <shadow type=\\\"text\\\"> <field name=\\\"TEXT\\\">Здесь лежит объект.</field> </shadow> </value> </block> <block type=\\\"instead_disp\\\"> <value name=\\\"TEXT\\\"> <shadow type=\\\"text\\\"> <field name=\\\"TEXT\\\">название</field> </shadow> </value> </block> <block type=\\\"instead_inv\\\"> <value name=\\\"TEXT\\\"> <shadow type=\\\"text\\\"> <field name=\\\"TEXT\\\">у меня есть объект</field> </shadow> </value> </block> <block type=\\\"instead_act\\\"> <value name=\\\"TEXT\\\"> <shadow type=\\\"text\\\"> <field name=\\\"TEXT\\\">действие на объект</field> </shadow> </value> </block> <block type=\\\"instead_used\\\"> <value name=\\\"TEXT\\\"> <block type=\\\"instead_method1\\\"> <statement name=\\\"DEFINITION\\\"> <shadow type=\\\"instead_print\\\"> <field name=\\\"TEXT\\\">вы использовали \\\"what\\\" на объект</field> </shadow> </statement> </block> </value> </block> <block type=\\\"instead_use\\\"> <value name=\\\"TEXT\\\"> <block type=\\\"instead_method1\\\"> <statement name=\\\"DEFINITION\\\"> <shadow type=\\\"instead_print\\\"> <field name=\\\"TEXT\\\">вы использовали себя на \\\"what\\\"</field> </shadow> </statement> </block> </value> </block> <sep></sep> <block type=\\\"instead_method0\\\"></block> <block type=\\\"instead_method1\\\"></block> \";\n// Exports\nexport default code;","// Module\nvar code = \"<block type=\\\"instead_room\\\"> <value name=\\\"DSC\\\"> <shadow type=\\\"text\\\"> <field name=\\\"TEXT\\\">Вы в большой комнате.</field> </shadow> </value> <statement name=\\\"DEFINITION\\\"> <block type=\\\"instead_obj\\\"></block> </statement> </block> <block type=\\\"instead_disp\\\"> <value name=\\\"TEXT\\\"> <shadow type=\\\"text\\\"> <field name=\\\"TEXT\\\">название</field> </shadow> </value> </block> <block type=\\\"instead_decor\\\"> <value name=\\\"TEXT\\\"> <shadow type=\\\"text\\\"> <field name=\\\"TEXT\\\">Детальное описание комнаты</field> </shadow> </value> </block> <block type=\\\"instead_obj\\\"></block> <block type=\\\"instead_way\\\"></block> <block type=\\\"instead_onenter\\\"> <value name=\\\"TEXT\\\"> <block type=\\\"instead_method1\\\"> <statement name=\\\"DEFINITION\\\"> <shadow type=\\\"instead_print\\\"> <field name=\\\"TEXT\\\">вошли в \\\"what\\\"</field> </shadow> </statement> </block> </value> </block> <block type=\\\"instead_onexit\\\"> <value name=\\\"TEXT\\\"> <block type=\\\"instead_method1\\\"> <statement name=\\\"DEFINITION\\\"> <shadow type=\\\"instead_print\\\"> <field name=\\\"TEXT\\\">выходите в \\\"what\\\"</field> </shadow> </statement> </block> </value> </block> <sep></sep> <block type=\\\"instead_method0\\\"></block> <block type=\\\"instead_method1\\\"></block> <block type=\\\"lists_create_with\\\"></block> \";\n// Exports\nexport default code;","// Module\nvar code = \"<label text=\\\"Текст\\\"></label> <block type=\\\"instead_print\\\"></block> <block type=\\\"text\\\"></block> <block type=\\\"text_multiline\\\"></block> <label text=\\\"Манипуляции над свойствами\\\"></label> <block type=\\\"instead_take\\\"> <value name=\\\"WHAT\\\"> <shadow type=\\\"instead_self\\\"></shadow> </value> </block> <block type=\\\"instead_drop\\\"> <value name=\\\"WHAT\\\"> <shadow type=\\\"instead_self\\\"></shadow> </value> </block> <block type=\\\"instead_disable\\\"> <value name=\\\"WHAT\\\"> <shadow type=\\\"instead_self\\\"></shadow> </value> </block> <block type=\\\"instead_enable\\\"> <value name=\\\"WHAT\\\"> <shadow type=\\\"instead_self\\\"></shadow> </value> </block> <label text=\\\"Параметр действия\\\"></label> <block type=\\\"instead_self\\\"></block> <block type=\\\"instead_what\\\"></block> <block type=\\\"instead_object_ref\\\"></block> <block type=\\\"instead_room_ref\\\"></block> \";\n// Exports\nexport default code;","// Module\nvar code = \"<block type=\\\"controls_if\\\"></block> <block type=\\\"logic_compare\\\"></block> <block type=\\\"logic_operation\\\"></block> <block type=\\\"logic_negate\\\"></block> <block type=\\\"logic_boolean\\\"></block> <block type=\\\"instead_where\\\"> <value name=\\\"WHAT\\\"> <shadow type=\\\"instead_self\\\"></shadow> </value> </block> <block type=\\\"instead_return_false\\\"></block> <block type=\\\"instead_self\\\"></block> <block type=\\\"instead_what\\\"></block> <block type=\\\"instead_object_ref\\\"></block> <block type=\\\"instead_room_ref\\\"></block> \";\n// Exports\nexport default code;","// Module\nvar code = \"<category name=\\\"File\\\" colour=\\\"215\\\"> <button text=\\\"Edit game metadata\\\" callbackKey=\\\"editMetadata\\\"></button> <button text=\\\"Show Lua code\\\" callbackKey=\\\"convertToLua\\\"></button> <button text=\\\"Run\\\" callbackKey=\\\"run\\\"></button> <button text=\\\"Save in browser\\\" callbackKey=\\\"save\\\"></button> <sep></sep> <button text=\\\"Save to your computer\\\" callbackKey=\\\"download\\\"></button> <button text=\\\"Load from your computer\\\" callbackKey=\\\"upload\\\"></button> </category> \";\n// Exports\nexport default code;"],"sourceRoot":""}